#See https://docs.cekit.io/en/latest/descriptor/overrides.html
name: &name "amq-broker-7/amq-broker-710-openshift-rhel8"
description: "Red Hat AMQ Broker 7.10.0 OpenShift container image"
version: &version "7.10"
from: "registry-proxy.engineering.redhat.com/rh-osbs/amq-broker-7-amq-broker-710-rhel8@sha256:88d9c6fd023a95981ec73a265ce6fca0ee2751caa17f71081e66ecb5c1e48db7"

labels:
  - name: "io.k8s.display-name"
    value: "Red Hat AMQ Broker 7.10.0"
  - name: "io.openshift.tags"
    value: "messaging,amq,java,jboss,xpaas"
  - name: "com.redhat.component"
    value: "amq-broker-rhel8-openshift-container"
  - name: "org.jboss.product"
    value: "amq"
  - name: "org.jboss.product.version"
    value: "7.10.0"
  - name: "org.jboss.product.amq.version"
    value: "7.10.0"

envs:
  - name: "JBOSS_PRODUCT"
    value: "AMQ"
  - name: "JBOSS_IMAGE_NAME"
    value: *name
  - name: "JBOSS_IMAGE_VERSION"
    value: *version
  - name: "JBOSS_AMQ_VERSION"
    value: "7.10.0"
  - name: "PRODUCT_VERSION"
    value: "7.10.0"

artifacts:
  - name: openshift-ping-common
    target: openshift-ping-common-1.2.6.Final-redhat-1.jar
    url: http://download.devel.redhat.com/brewroot/packages/org.openshift.ping-openshift-ping-parent/1.2.6.Final_redhat_1/1/maven/org/openshift/ping/openshift-ping-common/1.2.6.Final-redhat-1/openshift-ping-common-1.2.6.Final-redhat-1.jar
    md5: 94f0bd57b1990b556890d99290bdd847
  - name: openshift-ping-dns
    target: openshift-ping-dns-1.2.6.Final-redhat-1.jar
    url: http://download.devel.redhat.com/brewroot/packages/org.openshift.ping-openshift-ping-parent/1.2.6.Final_redhat_1/1/maven/org/openshift/ping/openshift-ping-dns/1.2.6.Final-redhat-1/openshift-ping-dns-1.2.6.Final-redhat-1.jar
    md5: 59925c951d904b7734c2d10dc41a6515
  - name: netty-tcnative
    target: netty-tcnative-2.0.50.Final-redhat-00002-linux-x86_64-fedora.jar
    url: http://download.devel.redhat.com/brewroot/packages/io.netty-netty-tcnative-parent/2.0.50.Final_redhat_00002/1/maven/io/netty/netty-tcnative/2.0.50.Final-redhat-00002/netty-tcnative-2.0.50.Final-redhat-00002-linux-x86_64-fedora.jar
    md5: da30231eb31dd21d30be477a198c6b8d
  - name: netty-tcnative-ppcle_64
    target: netty-tcnative-2.0.50.Final-redhat-00002-linux-ppcle_64-fedora.jar
    url: http://download.devel.redhat.com/brewroot/vol/rhel-8/packages/io.netty-netty-tcnative-parent-ppcle/2.0.50.Final_redhat_00002/1/maven/io/netty/netty-tcnative/2.0.50.Final-redhat-00002/netty-tcnative-2.0.50.Final-redhat-00002-linux-ppcle_64-fedora.jar
    md5: 13cc8a3e9c8e80feef58f6c89c0407e5
  - name: netty-tcnative-s390_64
    target: netty-tcnative-2.0.50.Final-redhat-00002-linux-s390_64-fedora.jar
    url: http://download.devel.redhat.com/brewroot/vol/rhel-8/packages/io.netty-netty-tcnative-parent-s390x/2.0.50.Final_redhat_00002/2/maven/io/netty/netty-tcnative/2.0.50.Final-redhat-00002/netty-tcnative-2.0.50.Final-redhat-00002-linux-s390_64-fedora.jar
    md5: 03e3b83601fcf0b98255aaecc7ba9b9d

modules:
  repositories:
    - name: cct_module
      git:
        url: https://github.com/artemiscloud/cct_module.git
        ref: 0.38.0-amq-2

packages:
  content_sets:
    x86_64:
      - rhel-8-for-x86_64-baseos-rpms
      - rhel-8-for-x86_64-appstream-rpms
    s390x:
      - rhel-8-for-s390x-baseos-rpms
      - rhel-8-for-s390x-appstream-rpms
    ppc64le:
      - rhel-8-for-ppc64le-baseos-rpms
      - rhel-8-for-ppc64le-appstream-rpms
  install:
    - apr
    - procps-ng
    - openssl

osbs:
  configuration:
    container: #See https://osbs.readthedocs.io/en/latest/users.html#image-configuration
      compose:
        signing_intent: release
        pulp_repos: true
      platforms:
        only:
          - x86_64
          - s390x
          - ppc64le
      image_build_method: imagebuilder
      tags:
        - "7.10.0.OPR.3.PATCH.3220.CR1"

  repository:
    name: containers/amq-broker
    branch: amq-broker-7.10-openshift-rhel-8
